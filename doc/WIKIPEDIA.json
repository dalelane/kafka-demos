{
    "type": "kafka",
    "name": "Wikipedia updates",
    "alias": "WIKIPEDIA",
    "contact": "dale.lane@uk.ibm.com",
    "description": "Events about edits made to the English Wikipedia",
    "tags": [
        "wikipedia",
        "json"
    ],
    "encoding": "application/json",
    "sampleMessages": [
        "{\n    \"dt\": \"2025-09-01T20:48:50.054Z\",\n\n    \"type\": \"edit\",\n\n    \"user_id\": 47133125,\n    \"user_text\": \"Mr. Information1409\",\n    \"user_is_bot\": false,\n    \"user_edit_count\": 2898,\n    \"user_registration_dt\": \"2024-01-01T05:00:30Z\",\n\n    \"page_title\": \"Sagittarius_(astrology)\",\n    \"uri\": \"https://en.wikipedia.org/wiki/Sagittarius_(astrology)\",\n\n    \"comment\": \"More reliable source is needed, because are actual astronomic investigations\"\n}"
    ],
    "schema": {
        "type": "json",
        "content": "{\n    \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n    \"title\": \"WikipediaEdits\",\n    \"description\": \"Schema for Wikipedia page creation and modification events\",\n    \"type\": \"object\",\n    \"required\": [\n        \"dt\",\n        \"type\",\n        \"user_text\",\n        \"user_is_bot\",\n        \"page_title\",\n        \"uri\"\n    ],\n    \"properties\": {\n        \"dt\": {\n            \"type\": \"string\",\n            \"format\": \"date-time\",\n            \"description\": \"ISO 8601 timestamp with millisecond precision indicating when the edit occurred (UTC timezone)\"\n        },\n        \"type\": {\n            \"type\": \"string\",\n            \"enum\": [\"edit\", \"new\"],\n            \"description\": \"Type of Wikipedia action: 'new' for page creation, 'edit' for modification of existing page\"\n        },\n        \"user_id\": {\n            \"type\": \"integer\",\n            \"minimum\": 1,\n            \"description\": \"Unique numeric identifier for registered Wikipedia user account. Only present for logged-in users, absent for anonymous IP edits\"\n        },\n        \"user_text\": {\n            \"type\": \"string\",\n            \"description\": \"Username for registered users, or IP address for anonymous users. For registered users, this is their chosen Wikipedia username. For anonymous users, this is their IPv4 or IPv6 address\"\n        },\n        \"user_is_bot\": {\n            \"type\": \"boolean\",\n            \"description\": \"Boolean flag indicating whether the user account has bot privileges on Wikipedia\"\n        },\n        \"user_edit_count\": {\n            \"type\": \"integer\",\n            \"minimum\": 0,\n            \"description\": \"Total number of edits made by this user account across all Wikipedia pages. Only present for registered users, absent for anonymous IP edits\"\n        },\n        \"user_registration_dt\": {\n            \"type\": \"string\",\n            \"format\": \"date-time\",\n            \"description\": \"ISO 8601 timestamp indicating when the user account was registered on Wikipedia. Only present for registered users, absent for anonymous IP edits\"\n        },\n        \"page_title\": {\n            \"type\": \"string\",\n            \"description\": \"Title of the Wikipedia page being created or edited, using Wikipedia's internal format with underscores replacing spaces and URL encoding for special characters\"\n        },\n        \"uri\": {\n            \"type\": \"string\",\n            \"format\": \"uri\",\n            \"pattern\": \"^https://en\\\\.wikipedia\\\\.org/wiki/\",\n            \"description\": \"Full URL to the Wikipedia page being edited, always starting with https://en.wikipedia.org/wiki/ for English Wikipedia\"\n        },\n        \"comment\": {\n            \"type\": \"string\",\n            \"description\": \"Edit summary provided by the user describing the changes made. May contain Wikipedia markup, links in double brackets [[]], and automated edit summaries from tools. Optional field that may be absent for edits without comments\"\n        }\n    },\n    \"allOf\": [\n        {\n            \"description\": \"Registered users must have user_id, user_edit_count, and user_registration_dt\",\n            \"if\": {\n                \"properties\": {\n                    \"user_text\": {\n                        \"not\": {\n                            \"pattern\": \"^\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}$|^[0-9a-fA-F:]+$\"\n                        }\n                    }\n                }\n            },\n            \"then\": {\n                \"required\": [\"user_id\", \"user_edit_count\", \"user_registration_dt\"]\n            }\n        },\n        {\n            \"description\": \"Anonymous IP users should not have user_id, user_edit_count, or user_registration_dt\",\n            \"if\": {\n                \"properties\": {\n                    \"user_text\": {\n                        \"pattern\": \"^\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}$|^[0-9a-fA-F:]+$\"\n                    }\n                }\n            },\n            \"then\": {\n                \"not\": {\n                    \"anyOf\": [\n                        {\"required\": [\"user_id\"]},\n                        {\"required\": [\"user_edit_count\"]},\n                        {\"required\": [\"user_registration_dt\"]}\n                    ]\n                }\n            }\n        }\n    ],\n    \"examples\": [\n        {\n            \"dt\": \"2025-09-01T20:48:22.829Z\",\n            \"type\": \"new\",\n            \"user_id\": 40192293,\n            \"user_text\": \"Sahaib\",\n            \"user_is_bot\": false,\n            \"user_edit_count\": 195785,\n            \"user_registration_dt\": \"2020-09-19T16:34:38Z\",\n            \"page_title\": \"Bishops_of_St_Asaph\",\n            \"uri\": \"https://en.wikipedia.org/wiki/Bishops_of_St_Asaph\",\n            \"comment\": \"[[WP:AES|â†’]]Redirected page to [[Bishop of St Asaph]]\"\n        },\n        {\n            \"dt\": \"2025-09-01T21:03:50.825Z\",\n            \"type\": \"edit\",\n            \"user_text\": \"115.99.36.145\",\n            \"user_is_bot\": false,\n            \"page_title\": \"Captain_Miller_(film)\",\n            \"uri\": \"https://en.wikipedia.org/wiki/Captain_Miller_(film)\"\n        }\n    ]\n}"
    },
    "clusterId": "CLUSTERID",
    "topic": {
        "name": "WIKIPEDIA"
    },
    "capabilities": [ "consume" ]
}